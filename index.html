<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Async em Frente</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/talk.css">
    <link rel="stylesheet" href="css/ryu.css">
    <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="position:absolute;width:0;height:0;visibility:hidden">
      <defs>
        <symbol xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 1000" id="ico-spin3">
          <path d="M493.556 -.063c-265.602 0 -482.306 209.741 -493.5 472.594 -.765 18.027 13 19.031 13 19.031l83.813 0c16.291 0 19.146 -9.297 19.531 -17.625 9.228 -199.317 175.315 -357.688 377.156 -357.688 107.739 0 204.915 45.163 273.719 117.563l-58.813 56.875c-10.23 12.319 -10.043 27.275 5.063 31.5l247.125 49.75c21.15 5.281 46.288 -10.747 37.656 -43.656l-58.375 -227.563c-1.482 -8.615 -15.924 -22.024 -29.406 -12.406l-64.094 60.031c-89.659 -91.567 -214.627 -148.406 -352.875 -148.406zm409.625 508.5c-16.291 0 -19.146 9.297 -19.531 17.625 -9.228 199.317 -175.315 357.688 -377.156 357.688 -107.739 0 -204.915 -45.132 -273.719 -117.531l58.813 -56.906c10.229 -12.319 10.043 -27.275 -5.063 -31.5l-247.125 -49.75c-21.15 -5.281 -46.288 10.747 -37.656 43.656l58.375 227.563c1.482 8.615 15.924 22.024 29.406 12.406l64.094 -60.031c89.659 91.567 214.627 148.406 352.875 148.406 265.602 0 482.306 -209.741 493.5 -472.594 .765 -18.027 -13 -19.031 -13 -19.031l-83.813 0z" />
        </symbol>
        <symbol xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1792 1792" id="ico-file-text">
          <svg width="1792" height="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1596 476q14 14 28 36h-472v-472q22 14 36 28zm-476 164h544v1056q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h800v544q0 40 28 68t68 28zm160 736v-64q0-14-9-23t-23-9h-704q-14 0-23 9t-9 23v64q0 14 9 23t23 9h704q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-704q-14 0-23 9t-9 23v64q0 14 9 23t23 9h704q14 0 23-9t9-23zm0-256v-64q0-14-9-23t-23-9h-704q-14 0-23 9t-9 23v64q0 14 9 23t23 9h704q14 0 23-9t9-23z" fill="#fff"/></svg>
        </symbol>
        <symbol xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1792 1792" id="ico-gear">
          <svg width="1792" height="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"/></svg>
        </symbol>
      </defs>
    </svg>
    <div class="reveal">

			<div class="slides">

				<section class="main-slide" data-background="./img/road-bg-2.jpg" data-background-repeat="no-repeat" data-background-size="cover" data-background-position="0% 0%">
          <h1 class="main-title">Async <br>em Frente</h1>
          <figure class="main-board-sign">
            <svg class="main-board-sign__img"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ico-spin3"></use></svg>
          </figure>
        </section>

        <section class="who-am-i-slide">
          <figure class="who-am-i"></figure>
          <div class="who-am-i__info">
            <h2>Romário da Silva Lima</h2>
            <ul>
              <li><em><code>reles</code></em> Front-end <small data-fragment-index="0" class="fragment" style="font-family: 'Arvo', serif; vertical-align: middle;">(6+ EXP)</small></li>
              <li>Ex-<span data-fragment-index="1" class="fragment highlight-wine">Vizir</span>, indo para <span data-fragment-index="1" class="fragment highlight-purple">Easynvest</span></li>
              <li>Gosto de batata e gosto de estudar</li>
            </ul>
            <figure class="charlinho fragment">
              <img src="img/charlinho.png" alt="Charlinho, o menino que so queria estudar">
            </figure>
          </div>
        </section>

				<section class="align-column-justify-center">
          <h3><span class="JS">JS</span> <code>async-flow</code> Evolution</h3>
          <div style="display: flex; align-items: center;">
            <p stlye="flex: 0 1 auto;"><span class="f-arvo invert-highlight">Po<span style="color: red;">r</span><span style="color: green;">r</span><span style="color: blue;">r</span> quê?</span> </p>
            <div style="padding-left: 30px; font-size: 0.7em;">
              <p class="fragment fade-left">Atendender demandas</p>
              <p class="fragment fade-left"><code>{facilitar a leitura do código}</code></p>
            </div>
          </div>
        </section>

        <section data-background="#6B4920" class="align-column-justify-center text-center">
          <h1>Call<code>backs</code></h1>
          <p>A base</p>
        </section>

        <section class="align-column-justify-center text-center">
          <h2>Ana<code>tomia</code></h2>
          <div style="display: flex; flex: 0 1 auto; justify-content: center; margin-bottom: 20px;">
            <div style="margin: 0 20px;">
              <div class="stitched-code">
                <pre><code class="javascript" data-trim>
getSomething(somethingId, (err, data) => {
  if (err) {
    // :(
    return
  }
  // tudo certo :)
})
                  </code></pre>
              </div>
              <div class="stitched-code" style="margin: 20px 0">
                <pre><code class="javascript" data-trim>
getSomething(somethingId, success, failure)
                  </code></pre>
              </div>
            </div>
          </div>
        </section>

        <section data-background="img/compilate-failshop.gif" class="align-column-justify-center text-center" data-background-size="contain">
          <div>
            <h2 class="FAILSHOPZ">
              <span>FAILSHOP</span>
            </h2>
          </div>
        </section>

        <section class="cb-slide align-column-justify-center">
          <h2>Call<code>back</code> Hell <small style="display: inline-block; vertical-align: middle; text-decoration: line-through;"><code>(Ryu)</code></small></h2>
          <div class="align-column-justify-center align-items-center">
            <div style="flex: 0 1 50%; position: relative; z-index: 100;">
              <div class="cb-ryu-wrapper">
                <div id="ryu-charge" class="ryu-fragments fragment">
                  <div id="ryu-hadouken" class="ryu-fragments fragment">
                    <span id="cb-ryu" class="ryu"></span>
                    <span id="cb-ryu-ball"><span class="ryu-ball"></span></span>
                  </div>
                </div>
              </div>
            </div>
             <div style="flex: 0 1 50%;  position: relative; z-index: 50;">
               <div class="stitched-code">
                    <pre><code class="javascript" data-trim>
getUserInfo(userId, (err, userInfo) => {
 if (err) {
   return
 }

 getFoo(userInfo.attributeId, (err, foo) => {
   // ...
   getBar(foo, (err, bar) => {
     // ...
     getAlfredinho(bar, (err, alfredinho) => {
       // ...
       giveMySoulBack(alfredinho, (err, soul) => {
        // ...
        pursuitFreedom(soul)
       })
     })
   })
 })
})
                      </code></pre>
                  </div>
                         </div>
             </div>
        </section>

        <section data-background="#6B4920" class="align-column-justify-center text-center">
          <h1>Pro<code>mises</code></h1>
        </section>

        <section class="align-column-justify-center align-items-center">
          <h3 class="f-arvo" style="flex: 0 1 auto;">Promise é igual a um...</h3>
          <div style="display: flex; flex: 1 1 auto;">
            <figure class="image-w-border fragment">
              <img src="img/sorvete.jpg" alt="">
            </figure>
          </div>
        </section>

<section class="align-column-justify-center align-items-center">
  <div style="flex: 0 1 auto;">
    <div class="stitched-code ">
      <pre><code class="javascript" data-trim>
function pegarPoteDeSorvete(pote) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (pote.conteudo instanceof Sorvete) {
        resolve(pote.conteudo)
        return
      }

      reject(pote.conteudo)
    }, 5000)
  })
}

pegarPoteDeSorvete(poteDaGeladeira)
.then(sorvete => console.log('Hoje Tem :)'))
.catch(feijao => console.log('Hoje Tem Janta :('))
      </code></pre>
    </div>
  </div>
  <div style="flex: 0 1 auto;">
    <figure class="image-w-border fragment" style="display: block !important; width: 40%; margin: 20px auto !important; ">
      <img src="img/sorvete-sorvete.jpg" alt="" style="width: 100%;">
      <span class="crazy-overlay f-arvo" style="background: rgba(0, 163, 136, .3);">.then</span>
    </figure>
     <figure class="image-w-border fragment" style="display: block !important; width: 40%; margin: 20px auto !important; ">
      <img src="img/sorvete-feijao.jpg" alt="" style="width: 100%;">
      <span class="crazy-overlay f-arvo" style="background: rgba(255, 97, 56, .3);">.catch</span>
    </figure>
  </div>
</section>

<section class="align-items-center align-column-justify-center">
  <div style="margin: 0 20px;">
    <div class="stitched-code">
      <pre><code class="javascript" data-trim>
function getUserAddress(userId, cb) {
  getUserInfo(userId, (userInfoError, userInfo) => {
    if (userInfoError) {
      cb(userInfoError)
      return
    }

    cep(userInfo.cep, (cepError, address) => {
      if (cepError) {
        cb(cepError)
        return
      }

      cb(null, address)
    })
  })
}
                      </code></pre>
    </div>
  </div>
  <div style="margin: 0 20px;">
    <div class="stitched-code fragment">
      <pre><code class="javascript" data-trim>
function getUserAddress(userId) {
  return getUserInfo(userId)
  .then(userInfo => cep(userInfo.cep))
  .catch(handleError)
}
      </code></pre>
    </div>
  </div>
</section>

<section data-background="http://replygif.net/i/1082.gif" data-background-size="contain"></section>

<section data-background="rgba(0, 163, 136, 1)" class="align-column-justify-center text-center">
  <h2 class="f-arvo">Mããããs... <small>eles querem mais</small></h2>
  <p>Querem escrever código <code><strong>async</strong></code> de uma maneira <code><strong>sync</strong></code></p>
</section>


<section class="align-column-justify-center text-center">
  <h2>O obj<code>etivo</code></h2>
  <div class="stitched-code">
    <pre><code class="javascript" data-trim>
function getUserAddress(userId) {
  const userInfo = getUserInfo(userId)
  const userAddress = cep(userInfo.cep)

  return userAddress
}
    </code></pre>
  </div>
</section>

<!-- <section class="align-column-justify-center text-center" data-background="img/symmetrical.gif" data-background-color="#000" data-background-size="contain">
  <h2 class="f-arvo fragment fade-up" style="margin: 0;"><span class="invert-highlight">Simetria</span></h2>
</section>
 -->

<section data-background="#6B4920" class="align-column-justify-center text-center">
  <h1>
    Gene<code>rators</code>
    <svg style="fill: #eee; animation: rotate-board-sign 5s alternate infinite; display: inline-block; vertical-align: middle; width: .65em;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ico-gear"></use></svg>
  </h1>
</section>

<section class="align-column-justify-center text-center">
  <h3>"Generator <code>por Generator"</code></h3>
  <p>
    <span class="invert-highlight fragment">Pausável ;)</span>
    <span class="invert-highlight fragment">Tenho múúúltiplos valores :<span style="color: red;">*</span></span>
    <span class="invert-highlight fragment">Retorno um <code>Iterator</code></span>
  </p>
</section>

<section class="align-column-justify-center text-center">
  <h2>Ana<code>tomia</code></h2>
  <div class="align-column-justify-center align-items-center" style="height: auto;">
    <div style="margin: 0 auto;">
      <div class="stitched-code">
        <pre><code class="javascript" data-trim data-noescape>
function *aleatorio() {
  yield 'Eu';
  yield 'gosto de';
  return 'batata.';
}

const iterator = aleatorio(); // {}
<span class="fragment">iterator.next() // { value: 'Eu', done: false }</span>
<span class="fragment">iterator.next() // { value: 'gosto de', done: false }</span>
<span class="fragment">iterator.next() // { value: 'batata.', done: true }</span>
          </code></pre>
      </div>
    </div>
    <div style="margin: 0 auto;">
      <div class="stitched-code fragment fade-right">
        <pre><code class="javascript" data-trim data-noescape>
function *fib() {
  let current = 0
  let next = 1

  yield current

  while (true) {
    [current, next] = [next, current + next]
    yield current
  }
}
      </code></pre>
      </div>
    </div>
  </div>
</section>

<section class="align-column-justify-center align-items-center" style="padding: 0px;">
  <h3 style="position: absolute; top: 50%; left: 0; right: 0; text-align: center; transform: translateY(-50%); z-index: 1;">Generator tem dupla personalidade</h3>
  <div style="position: relative; z-index: 10; height: 100%; flex: 0 1 50%; padding: 20px; box-sizing: border-box; justify-content: center; display: flex; align-items: center; background: #E74C3C; flex-direction: column;" class="fragment fade-right">
    <h3 class="f-arvo" style="align-self: flex-start;">Iterator</h3>
    <p style="font-size: 0.6em; align-self: flex-start;">
      <span class="invert-highlight f-arvo" style="width: 80px; margin-right: 10px; text-align: center;">yield</span>
      <code>generator.next().value</code>
    </p>
    <p style="font-size: 0.6em; align-self: flex-start;">
      <span class="invert-highlight f-arvo" style="width: 80px; margin-right: 10px; text-align: center;">throw</span>
      <code>try { generator.next() } catch(err) { ... } </code>
    </p>
    <p style="font-size: 0.6em; align-self: flex-start;">
      <span class="invert-highlight f-arvo" style="width: 80px; margin-right: 10px; text-align: center;">done</span>
      <code>if (generator.next().done) { }</code>
    </p>
  </div>
  <div style="position: relative; z-index: 10; height: 100%; flex: 0 1 50%; padding: 20px; box-sizing: border-box; justify-content: center; display: flex; align-items: center; background: #2980B9;  flex-direction: column;" class="fragment fade-left">
    <h3 class="f-arvo" style="align-self: flex-end;">Observer</h3>
    <p style="font-size: 0.6em; align-self: flex-end;">
      <code>generator.next(10)</code>
      <span class="invert-highlight f-arvo" style="width: 80px; margin-left: 10px; text-align: center;">data</span>
    </p>
    <p style="font-size: 0.6em; align-self: flex-end;">
      <code>generator.throw('não tem biscoito') </code>
      <span class="invert-highlight f-arvo" style="width: 80px; margin-left: 10px; text-align: center;">error</span>
    </p>
    <p style="font-size: 0.6em; align-self: flex-end;">
      <code>generator.returns(10)</code>
      <span class="invert-highlight f-arvo" style="width: 80px; margin-left: 10px; text-align: center;">return</span>
    </p>
  </div>
</section>

<section class="align-column-justify-center">
<h4 style="text-align: center;">Interação <code class="invert-highlight">async</code> com cara de <code class="invert-highlight">sync</code></h4>
<div class="stitched-code">
        <pre><code class="javascript" data-trim data-noescape>
function *getUserAddress(userId) {
  const userInfo = yield getUserInfo(userId)
  const address = yield cep(userInfo.cep)

  return address
}

<span class="fragment">spawn(getUserAddress('zulu-zulu-1')).then().catch()</span>
      </code></pre>
  </div>
</section>

<section class="align-column-justify-center align-items-center" style="padding: 0px;">
  <h3 style="position: absolute; top: 3%; left: 0; right: 0; text-align: center; transform:z-index: 1;"><code>async</code> iteration</h3>
  <div style="position: relative; z-index: 10; height: 100%; flex: 0 1 50%; padding: 20px; box-sizing: border-box; justify-content: center; display: flex; align-items: center; background: #000; flex-direction: column;">
    <h3 class="f-arvo" style="align-self: flex-start;">Consumer</h3>
    <div class="stitched-code" style="width: 100%;">
      <pre style="width: 100%;"><code class="javascript" data-trim data-noescape style="height: 80px; position: relative; overflow: hidden;">
        <span class="fragment code-special-fragment" data-fragment-index="1">
          const generator = getUserAddress('zulu-zulu-1')
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="2">
          let result = generator.next()
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="3">
          result.then(/* ... */)
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="4">
          { cep: '05361-000' }
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="5">
          result = generator.next({ cep: '05361-000' })
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="7">
          result.then(/* ... */)
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="8">
          { cep: '05361000', state: 'SP', /* ... */ }
        </span>
        <span class="fragment code-special-fragment final" data-fragment-index="9">
          result = { cep: '05361000', state: 'SP', /* ... */ }
        </span>
      </code></pre>
    </div>
  </div>
  <div style="position: relative; z-index: 10; height: 100%; flex: 0 1 50%; padding: 20px; box-sizing: border-box; justify-content: center; display: flex; align-items: center; background: #000;  flex-direction: column;">
    <h3 class="f-arvo" style="align-self: flex-end;">Producer</h3>
    <div class="stitched-code" style="width: 100%;">
      <pre style="width: 100%;"><code class="javascript" data-trim data-noescape style="height: 80px; position: relative; overflow: hidden;">
        <span class="fragment code-special-fragment" data-fragment-index="2">
          const userInfo = yield getUserInfo('zulu-zulu-1')
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="5">
          const userInfo = { cep: '05361-000' }
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="6">
          const address = yield cep(userInfo.cep)
        </span>
        <span class="fragment code-special-fragment" data-fragment-index="8">
          const address = { cep: '05361000', state: 'SP', /* ... */ }
        </span>
      </code></pre>
    </div>
  </div>
</section>

<section class="align-column-justify-center align-items-center" style="padding: 0px;">
  <h3 style="position: absolute; top: 3%; left: 0; right: 0; text-align: center; transform:z-index: 1;"><code>async</code> iteration</h3>
  <div style="position: relative; z-index: 10; height: 100%; flex: 0 1 50%; padding: 20px; box-sizing: border-box; justify-content: center; display: flex; align-items: center; background: #000; flex-direction: column;">
    <h3 class="f-arvo">Consumer</h3>
    <div class="stitched-code" style="width: 100%;">
      <pre><code class="javascript" data-trim data-noescape>
function spawn(generator) {
  return new Promise((resolve, reject) => {
    const onResult = lastPromiseResult => {
      const { value, done } = generator.next(lastPromiseResult)
      if (!done) {
        value.then(onResult, reject)
        return
      }
      resolve(value)
    }
    onResult()
  })
}
      </code></pre>
    </div>
  </div>
  <div style="position: relative; z-index: 10; height: 100%; flex: 0 1 50%; padding: 20px; box-sizing: border-box; justify-content: center; display: flex; align-items: center; background: #000;  flex-direction: column; align-self: flex-start;">
    <h3 class="f-arvo" style="">Producer</h3>
    <div class="stitched-code" style="width: 100%;">
      <pre style="width: 100%;"><code class="javascript" data-trim data-noescape>
function *getUserAddress(userId) {
  const userInfo = yield getUserInfo(userId)
  const address = yield cep(userInfo.cep)

  return address
}

spawn(getUserAddress('zulu-zulu-1'))
      </code></pre>
    </div>
  </div>
</section>

<section data-background="#6B4920" class="align-column-justify-center text-center">
  <h1>As<code>ync / Awa</code>it</h1>
  <p class="fragment f-arvo"><small class="invert-highlight">No babel mais perto de você</small></p>
</section>

<section class="align-column-justify-center">
  <div>
    <h2><div class="JS">TC39</div> Mat<code>urity Stag</code>es</h2>
  </div>
  <div>
    <p>
      <span class="invert-highlight">Stage 0</span>
      <code>Strawman</code>
    </p>
    <p>
      <span class="invert-highlight">Stage 1</span>
      <code>Proposal</code>
    </p>
    <p>
      <span class="invert-highlight">Stage 2</span>
      <code>Draft</code>
    </p>
    <p>
      <span class="invert-highlight">Stage 3</span>
      <code>Candidate</code>
    </p>
    <p class="fragment fragmento-legal" style="opacity: 1 !important; visibility: visible !important;">
      <span class="invert-highlight">Stage 4</span>
      <code>Finished</code>
    </p>
  </div>
</section>


<section class="align-column-justify-center text-center">
  <div class="fragment carreta-bg"></div>
  <h2 style="position: relative; z-index: 5; text-align: center;">Ana<code>tomia</code></h2>
  <div style="position: relative; z-index: 5; ">
    <div class="stitched-code">
      <pre><code class="javascript" data-trim data-noescape>
async function getUserAddress(userId) {
  const userInfo = await getUserInfo(userId)
  const address = await cep(userInfo.cep)

  return address
}
      </code></pre>
    </div>
  </div>
  <p style="position: relative; z-index: 5; " class="fragment fade-down"><code>{Syntax Sugar}</code></p>
</section>

<section data-background="rgba(0, 163, 136, 1)" class="align-column-justify-center text-center">
  <h2 class="f-arvo">Há muito mais por aí...</h2>
  <p>
    <span class="invert-highlight f-arvo">{ async function *() }</span>
    <span class="invert-highlight f-arvo">{ for await (const x  of iterable) }</span>
    <span class="invert-highlight f-arvo">{ Observables (RxJS) }</span>
  </p>
</section>

<section class="align-column-justify-center text-center">
  <figure class="image-w-border">
    <img src="img/esmagares-a-rata.jpg" alt="">
  </figure>
</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
      window.l = console.log;
			Reveal.initialize({
				history: true,
        transition: 'slide',
        // backgroundTransition: 'slide',
				dependencies: [
          { src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					// { src: 'plugin/notes/notes.js', async: true },
          // { src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>

    <script>
      (function() {
        const ryuElement = document.getElementById('cb-ryu');
        const ryuBallElement = document.getElementById('cb-ryu-ball');

        const e = () => {
          ryuElement.classList.remove('charge', 'hadouken');
          ryuBallElement.classList.add('active');
        };

        const anims = {
          'ryu-charge-add'() {
            ryuElement.classList.add('charge');
          },
          'ryu-charge-remove'() {
            ryuElement.classList.remove('charge');
          },
          'ryu-hadouken-add'() {
            ryuElement.classList.add('hadouken');

            ryuElement.addEventListener('animationend', e, false);
          },
          'ryu-hadouken-remove'() {
            ryuElement.classList.remove('hadouken');
            ryuElement.classList.add('charge');
            ryuBallElement.classList.remove('active');
            ryuElement.removeEventListener('animationend', e, false);
          }
        };

        Reveal.addEventListener('fragmentshown', (event) => {
          if (event.fragment.classList.contains('ryu-fragments')) {
            const method = event.fragment.id + '-add';
            anims[method] && anims[method]()
          }
        });

        Reveal.addEventListener('fragmenthidden', (event) => {
          if (event.fragment.classList.contains('ryu-fragments')) {
             const method = event.fragment.id + '-remove';
            anims[method] && anims[method]()
          }
        });

      })();
    </script>

    <script src="js/wat.js"></script>
    <script src="//localhost:35729/livereload.js"></script>
	</body>
</html>
